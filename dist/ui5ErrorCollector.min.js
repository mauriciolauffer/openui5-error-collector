(function(){"use strict";(function(){if(window.ui5ErrorCollector)return;function i(){window.sap&&sap.ui&&sap.ui.require?(sap.ui.require(["sap/base/Log"],l),clearInterval(a)):Date.now()-y>6e4&&clearInterval(a)}function l(e){const n={onLogEntry:function(w){o.push(u(w))}};e.addLogListener(n)}function u(e){const n=new Error(e.message);return Object.assign(r,{type:"ui5",timestamp:new Date(e.timestamp||Date.now()).toJSON(),uri:window.location.href,stack:n.stack,message:e.message,component:e.component,level:e.level})}function m(e){return Object.assign({},r,{type:e.type,timestamp:new Date().toJSON(),uri:e.target.location.href,stack:e.error.stack,message:e.message,elapsedTimestamp:e.timeStamp,filename:e.filename,level:1})}function d(e){return Object.assign({},r,{type:e.type,timestamp:new Date().toJSON(),uri:e.target.location.href,message:e.reason,elapsedTimestamp:e.timeStamp,level:1})}function f(){return o.filter(function(e){return new Date(e.timestamp)>new Date(t.lastSync)})}function s(){if(!t.hasSyncOnExit)return;const e=f();if(e.length===0)return;const n=JSON.stringify(e);if(navigator.sendBeacon){navigator.sendBeacon(t.serverUrl,n),t.lastSync=Date.now();return}fetch(t.serverUrl,{body:n,method:"POST"}).then(function(c){c.ok&&(t.lastSync=Date.now())})}function g(e){const n=e||{};t.hasSyncOnExit=n.hasSyncOnExit,t.serverUrl=n.serverUrl}function p(){return o}const o=[],t={hasSyncOnExit:!1,lastSync:0,serverUrl:""},r={type:"",timestamp:"",uri:"",stack:"",message:"",component:"",level:0,elapsedTimestamp:0,filename:""},y=Date.now(),a=setInterval(i,300);i(),window.addEventListener("error",function(n){o.push(m(n))}),window.addEventListener("unhandledrejection",function(n){o.push(d(n))}),window.addEventListener("beforeunload",function(){s()}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&s()}),window.ui5ErrorCollector={getErrors:p,setConfiguration:g}})()})();
