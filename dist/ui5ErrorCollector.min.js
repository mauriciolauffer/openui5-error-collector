(function(){"use strict";(function(){if(window.ui5ErrorCollector)return;function i(){window.sap&&sap.ui&&sap.ui.require?(sap.ui.require(["sap/base/Log"],u),clearInterval(c)):Date.now()-L>6e4&&clearInterval(c)}function u(e){const n={onLogEntry:function(s){t.push(p(s))}};e.addLogListener(n)}function p(e){const n=new Error(e.message);return Object.assign({},r,{type:"ui5",timestamp:new Date(e.timestamp||Date.now()).toJSON(),uri:window.location.href,stack:n.stack,message:e.message,component:e.component,level:e.level})}function m(e){return Object.assign({},r,{type:e.type,timestamp:new Date().toJSON(),uri:window.location.href,stack:e.error.stack,message:e.message,elapsedTimestamp:e.timeStamp,filename:e.filename,level:1})}function f(e){return console.log(typeof e.reason),console.dir(e.reason),Object.assign({},r,{type:e.type,timestamp:new Date().toJSON(),uri:window.location.href,stack:typeof e.reason=="object"?e.reason.stack:null,message:typeof e.reason=="object"?e.reason.message:e.reason,elapsedTimestamp:e.timeStamp,level:1})}function d(e){const n=e.body||{};return Object.assign({},r,{type:e.type,timestamp:new Date().toJSON(),uri:e.url,message:n.message||n.reason,component:n.id,level:1,filename:n.sourceFile})}function g(){return t.filter(function(e){return new Date(e.timestamp)>new Date(o.lastSync)})}function a(){const e=g();if(!o.serverUrl||e.length===0)return;const n=JSON.stringify(e);o.onSyncHook?o.onSyncHook(o.serverUrl,t):(navigator.sendBeacon(o.serverUrl,n),o.lastSync=Date.now())}function y(e){const n=e||{};o.serverUrl=n.serverUrl,typeof n.onSyncHook=="function"&&(o.onSyncHook=n.onSyncHook)}function w(){return t}function E(){if(window.ReportingObserver){const e={types:["deprecation","intervation","crash"],buffered:!0};new ReportingObserver(function(l){l.forEach(function(s){t.push(d(s))})},e).observe()}}const t=[],o={lastSync:0,serverUrl:"",onSyncHook:null},r={type:"",timestamp:"",uri:"",stack:null,message:"",component:null,level:0,elapsedTimestamp:null,filename:null},L=Date.now(),c=setInterval(i,300);i(),E(),window.addEventListener("error",function(n){t.push(m(n))}),window.addEventListener("unhandledrejection",function(n){t.push(f(n))}),window.addEventListener("beforeunload",function(){a()}),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&a()}),window.ui5ErrorCollector={getErrors:w,setConfiguration:y}})()})();
